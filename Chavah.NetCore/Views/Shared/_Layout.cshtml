@inject IOptionsSnapshot<AppSettings> appSettings
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.PageTitle</title>
    <base href="/">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="mobile-web-app-capable" content="yes" />

    @* iOS status bar style. See http://stackoverflow.com/questions/39749015/apple-mobile-web-app-status-bar-style-in-ios-10 *@
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    @*This allows fixed position elements to work properly*@
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

    <meta name="description" content="The very best Messianic Jewish and Hebrew Roots radio on the web" />
    <meta name="keywords" content="messianic jewish radio hebrew roots chavah christian music" />

    @* Fav icons *@
    <!--[if IE]>
    <link rel="shortcut icon" type="image/ico" href="~/FavIcon.ico")">
    <!--<![endif]-->
    <!--[if !IE]>-->
    <link rel="icon" type="image/png" href="~/images/FavIcon32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="~/images/FavIcon64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="~/images/FavIcon128.png" sizes="128x128">
    <link rel="icon" type="image/png" href="~/images/FavIcon256.png" sizes="256x256">
    <!--<![endif]-->
    @* Apple iOS shortcut *@
    <link rel="apple-touch-icon" href="~/images/FavIconAppleTile.png" )" />
    @*<link rel="apple-touch-startup-image" href="~/Content/images/ios-startup-image-landscape.png" media="(orientation:landscape)" />
        <link rel="apple-touch-startup-image" href="~/Content/images/ios-startup-image-portrait.png" media="(orientation:portrait)" />
        <link rel="apple-touch-icon" href="~/Content/images/icon.png" />*@

    @*IE9, IE10, IE11 pinned site / jumplist*@
    <meta name="msapplication-task" content="name=Chavah on Facebook;action-uri=http://www.facebook.com/pages/Chavah-Messianic-Radio/134887069882254;icon-uri=/content/images/jumplist_facebook.ico" />
    <meta name="msapplication-task" content="name=Chavah on Twitter;action-uri=http://twitter.com/chavahradio;icon-uri=/content/images/jumplist_twitter.ico" />
    <meta name="msapplication-navbutton-color" content="brown" />
    <meta name="msapplication-starturl" content="http://messianicradio.com" />
    <meta name="msapplication-tooltip" content="@appSettings.Value.Application.Title" />

    @*Windows 8 tile*@
    <meta name="application-name" content="@appSettings.Value.Application.Title" />
    <meta name="msapplication-TileColor" content="#080f24" />
    <meta name="msapplication-TileImage" content="~/images/chavahLogoWindows8Tile.png" />

    @*Windows 8.1 tiles with notifications*@
    <meta name="application-name" content="@appSettings.Value.Application.Title" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-square70x70logo" content="~/images/Windows81Tile/tiny.png" />
    <meta name="msapplication-square150x150logo" content="~/images/Windows81Tile/square.png" />
    <meta name="msapplication-wide310x150logo" content="~/images/Windows81Tile/wide.png" />
    <meta name="msapplication-square310x310logo" content="~/images/Windows81Tile/large.png" />
    <meta name="msapplication-notification" content="frequency=30;polling-uri=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/activityfeed&amp;id=1;polling-uri2=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=2;polling-uri3=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=3;polling-uri4=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=4;polling-uri5=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=5; cycle=1" />

    @* Web app manifest. Browsers use this to install the app to the desktop if the users wants to. *@
    @* Commented out: this won't work until our service worker supports offline fetch. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/ *@
    @*<link rel="manifest" href="/WebAppManifest.json" />*@

    @* Twitter card. When a user shares a song, we show a full card containing album art and song info. *@
    <meta name="twitter:creator" content="&#64;chavahradio">
    <meta name="twitter:site" content="&#64;chavahradio">
    @if (Model != null && Model.Song != null)
    {
        // Show a Twitter summary card with the song info.
        <meta name="twitter:card" content="summary" />
        @*<meta name="twitter:card" content="summary_large_image" />*@
        <meta name="twitter:url" content="https://messianicradio.com@(Model.Song.GetSongShareLink())" />
            <meta name="twitter:title" content="@Model.Song.Name by @Model.Song.Artist" />
            <meta name="twitter:description" content='"@Model.Song.Name" by @Model.Song.Artist appears as the @Model.SongNth song on the @Model.Song.Album album. @Model.Song.Name is now ranked @(Model.Song.CommunityRank >= 0 ? '+' : '-')@Model.Song.CommunityRank by the international Messianic community.' />
            <meta name="twitter:image" content="@Model.Song.AlbumArtUri" />
    }
    else
    {
        // No song? Show a Twitter summary card for Chavah itself, rather than for a song.
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:url" content="https://messianicradio.com" />
        <meta name="twitter:title" content="Chavah Messianic Radio" />
        <meta name="twitter:description" content="Music for Yeshua's disciples. The very best Messianic Jewish and Hebrew Roots music on the web. Up vote your favorite songs, Chavah learns your musical preferences to play only the things you enjoy." />
        <meta name="twitter:image" content="https://messianicradio.com/content/images/chavahLogoTwitterCard.png" />
    }

    @*Bring in our web fonts*@
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic|EB+Garamond|Simonetta:400italic' rel='stylesheet' type='text/css' />

    @*CSS for development*@
    <environment include="Development">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="~/css/bootswatch.css" />
        <link rel="stylesheet" href="~/css/bootstrap-flatly.css" />
        <link rel="stylesheet" href="~/css/bootstrap-flatly-tweaks.css" />
        <link rel="stylesheet" href="~/css/nprogress.css" />
        <link rel="stylesheet" asp-href-include="~/css/app/*.min.css" />
    </environment>

    @*CSS for production*@
    <environment include="Staging,Production">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/bundles/app.css" />
    </environment>
</head>

<body>
    @RenderBody()

    @*JS for dev*@
    <environment names="Development">
        @*3rd party JS*@
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
        <script src="~/lib/angular/angular.js"></script>
        <script src="~/lib/angular-route/angular-route.js"></script>
        <script src="~/lib/angular-animate/angular-animate.js"></script>
        <script src="~/lib/angular-bootstrap/ui-bootstrap.js"></script>
        <script src="~/lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>
        <script src="~/lib/angular-local-storage/dist/angular-local-storage.js"></script>
        <script src="~/lib/nprogress/nprogress.js"></script>
        <script src="~/lib/moment/moment.js"></script>
        <script src="~/lib/lodash/dist/lodash.js"></script>
        <script src="~/lib/rxjs/dist/rx.all.js"></script>
        <script src="~/lib/tslib/tslib.js"></script>
        <script src="~/lib/fastclick/lib/fastclick.js"></script>
        <script src="~/lib/tinycolor/tinycolor.js"></script>

        @*Chavah JS*@
        <script asp-src-include="~/js/polyfills/*.js"></script>
        <script asp-src-include="~/js/common/*.js"></script>
        <script asp-src-include="~/js/models/*.js"></script>
        <script asp-src-include="~/js/*.js"></script>
        <script asp-src-include="~/js/directives/*.js"></script>
        <script asp-src-include="~/js/services/*.js"></script>
        <script asp-src-include="~/js/controllers/*.js"></script>
    </environment>

    @*JS for production*@
    <environment names="Staging,Production">
        @*3rd party JS*@
        <script src="https://code.jquery.com/jquery-2.2.4.min.js" asp-fallback-src="~/lib/jquery/dist/jquery.min.js" asp-fallback-test="window.jQuery"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js" asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular.min.js" asp-fallback-src="~/lib/angular/angular.js" asp-fallback-test="window.angular"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular-route.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular-animate.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap-tpls.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-local-storage/0.5.0/angular-local-storage.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" asp-fallback-src="~/lib/nprogress/nprogress.js" asp-fallback-test="window.NProgress"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js" asp-fallback-src="~/lib/moment/moment.js" asp-fallback-test="window.moment"></script>
        <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js" asp-fallback-src="~/lib/lodash/dist/lodash.js" asp-fallback-test="window._"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/4.1.0/rx.lite.js" asp-fallback-src="~/lib/rxjs/dist/rx.all.min.js" asp-fallback-test="window.Rx && window.Rx.Observable"></script>
        <script src="https://cdn.jsdelivr.net/npm/tslib@1.6.0/tslib.js" asp-fallback-src="~/lib/tslib/tslib.js" asp-fallback-test="window.__asyncValues"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js" asp-fallback-src="~/lib/fastclick/lib/fastclick.js" asp-fallback-test="window.FastClick"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.1/tinycolor.min.js" asp-fallback-src="~/lib/tinycolor/tinycolor.js" asp-fallback-test="window.tinycolor"></script>

        @*Chavah JS*@
        <script src="~/bundles/app.js"></script>
    </environment>

    @RenderSection("Scripts", required: false)

    @*TrackJS for diagnosing client-side errors*@
    @*<script type="text/javascript">window._trackJs = { token: '3f47a41e023149458b76ae8aa70bab84' };</script>
    <script type="text/javascript" src="https://cdn.trackjs.com/releases/current/tracker.js"></script>*@

    @*Google analytics*@
    <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            var userId = '@(Model != null && !string.IsNullOrEmpty(Model.UserEmail) ? Model.UserEmail : string.Empty)';
            if (userId) {
                ga('create', 'UA-58465409-1', 'auto', { userId: userId });
            } else {
                ga('create', 'UA-58465409-1', 'auto');
            }
    </script>

    @*Facebook connect*@
    @*Commented out 11/8/17: we're not actually using this right now.*@
    @*<script>
                (function (d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=256833604430846";
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));
        </script>*@
</body>
</html>
