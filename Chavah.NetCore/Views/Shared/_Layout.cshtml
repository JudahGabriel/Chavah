@model BitShuva.ViewModels.HomeViewModel
<!DOCTYPE html>
<html>
<head>
    <title>@Model.PageTitle</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="mobile-web-app-capable" content="yes" />

    @*This allows fixed position elements to work properly*@
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

    <meta name="description" content="The very best Messianic Jewish and Hebrew Roots radio on the web" />
    <meta name="keywords" content="messianic jewish radio hebrew roots chavah christian music" />

    @* Fav icons *@
    <!--[if IE]>
    <link rel="shortcut icon" type="image/ico" href="~/content/images/FavIcon.ico">
    <!--<![endif]-->
    <!--[if !IE]>-->
    <link rel="icon" type="image/png" href="~/images/FavIcon32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="~/images/FavIcon64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="~/images/FavIcon128.png" sizes="128x128">
    <link rel="icon" type="image/png" href="~/images/FavIcon256.png" sizes="256x256">
    <!--<![endif]-->

    @* Apple iOS shortcut *@
    <link rel="apple-touch-icon" href="~/content/images/FavIconAppleTile.png" />

    @* iOS status bar See http://stackoverflow.com/questions/39749015/apple-mobile-web-app-status-bar-style-in-ios-10*@
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    @*IE9, IE10 pinned site / jumplist*@
    <meta name="msapplication-task" content="name=Chavah on Facebook;action-uri=http://www.facebook.com/pages/Chavah-Messianic-Radio/134887069882254;icon-uri=/content/images/jumplist_facebook.ico" />
    <meta name="msapplication-task" content="name=Chavah on Twitter;action-uri=http://twitter.com/chavahradio;icon-uri=/content/images/jumplist_twitter.ico" />
    <meta name="msapplication-navbutton-color" content="brown" />
    <meta name="msapplication-starturl" content="https://messianicradio.com" />
    <meta name="msapplication-tooltip" content="Chavah Messianic Radio" />

    @*Windows 8 tile*@
    <meta name="application-name" content="Chavah Messianic Radio" />
    <meta name="msapplication-TileColor" content="#080f24" />
    <meta name="msapplication-TileImage" content="~/content/images/chavahLogoWindows8Tile.png" />

    @*Windows 8.1 tiles with notifications*@
    <meta name="application-name" content="Chavah Messianic Radio" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-square70x70logo" content="~/content/images/Windows81Tile/tiny.png" />
    <meta name="msapplication-square150x150logo" content="~/content/images/Windows81Tile/square.png" />
    <meta name="msapplication-wide310x150logo" content="~/content/images/Windows81Tile/wide.png" />
    <meta name="msapplication-square310x310logo" content="~/content/images/Windows81Tile/large.png" />
    <meta name="msapplication-notification" content="frequency=30;polling-uri=http://notifications.buildmypinnedsite.com/?feed=https://messianicradio.com/durandal/activityfeed&amp;id=1;polling-uri2=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=2;polling-uri3=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=3;polling-uri4=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=4;polling-uri5=http://notifications.buildmypinnedsite.com/?feed=http://messianicradio.com/durandal/activityfeed&amp;id=5; cycle=1" />

    @* Web app manifest. Browsers use this to install the app to the desktop if the users wants to. *@
    @* Commented out: this won't work until our service worker supports offline fetch. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/ *@
    @*<link rel="manifest" href="/WebAppManifest.json" />*@

    @* Twitter card *@
    <meta name="twitter:creator" content="&#64;chavahradio">
    <meta name="twitter:site" content="&#64;chavahradio">
    @if (Model.Song != null)
    {
        // Show a Twitter summary card with the song info.
        <meta name="twitter:card" content="summary" />
            @*<meta name="twitter:card" content="summary_large_image" />*@
            <meta name="twitter:url" content="https://messianicradio.com@(Model.Song.GetSongShareLink())" />
            <meta name="twitter:title" content="@Model.Song.Name by @Model.Song.Artist" />
            <meta name="twitter:description" content='"@Model.Song.Name" by @Model.Song.Artist appears as the @Model.SongNth song on the @Model.Song.Album album. @Model.Song.Name is now ranked @(Model.Song.CommunityRank >= 0 ? '+' : '-')@Model.Song.CommunityRank by the international Messianic community.' />
            <meta name="twitter:image" content="@Model.Song.AlbumArtUri" />
    }
    else
    {
        // Show a Twitter summary card for Chavah itself, rather than for a song.
        <meta name="twitter:card" content="summary" />
            <meta name="twitter:url" content="https://messianicradio.com" />
            <meta name="twitter:title" content="Chavah Messianic Radio" />
            <meta name="twitter:description" content="Music for Yeshua's disciples. The very best Messianic Jewish and Hebrew Roots music on the web. Up vote your favorite songs, Chavah learns your musical preferences to play only the things you enjoy." />
            <meta name="twitter:image" content="https://messianicradio.com/content/images/chavahLogoTwitterCard.png" />
    }

    <script type="text/javascript">
        if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
            var msViewportStyle = document.createElement("style");
            var mq = "@@-ms-viewport{width:auto!important}";
            msViewportStyle.appendChild(document.createTextNode(mq));
            document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
        }
    </script>

    <environment include="Development">
        <link rel="stylesheet" href="~/css/bootswatch.css" />
        <link rel="stylesheet" href="~/lib/Font-Awesome/css/font-awesome.css" />
        <link rel="stylesheet" href="~/css/bootstrap.flatly.css" />
        <link rel="stylesheet" href="~/css/bootstrap.flatly.tweaks.css" />
        <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic|EB+Garamond|Simonetta:400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" asp-href-include="~/css/*.min.css" />
    </environment>

    <environment include="Staging,Production">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic|EB+Garamond|Simonetta:400italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="~/dist/app.min.css" />
    </environment>
</head>
<body>
    @* Attach an image that Facebook will use if someone links to a song. *@
    @if (!string.IsNullOrEmpty(Model.DescriptiveImageUrl))
    {
        <img src="@Model.DescriptiveImageUrl" style="display:none;" />
    }

    <div class="splash" style="width: 100%; height: 100%; text-align: center; position: absolute; top:45%;">
        <div>
            <h2><i class="fa fa-spin" style="background-color: transparent;">✡</i> Chavah loading...</h2>
        </div>
    </div>

    <div id="appContainer" data-ng-app="ChavahApp">
        <div ng-include="Partials.headerPartial"></div>
        <div id="currentPageContainer" data-ng-view></div>
        <footer ng-include="Partials.footerPartial"></footer>
    </div>

    <script type="text/javascript">
            window["BitShuva.Chavah.InitConfig"] = {
                debug: @(Model.Debug ? bool.TrueString.ToLower() : bool.FalseString.ToLower()),
                songId: "@(Model.Song != null ? Model.Song.Id : "")",
                redirect: "@Model.Redirect",
                userEmail: "@Model.UserEmail",
                userRoles: "@string.Join(",", Model.UserRoles)".split(","),
                notifications: @Html.Raw(Model.NotificationsToJsArray()),
                jwt: "@Model.Jwt",
                embed: @(Model.Embed ? bool.TrueString.ToLower() : bool.FalseString.ToLower())
            };
    </script>
    
    @*In dev, reference our files directly for easier debugging.*@
    <environment include="Development">
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
        <script src="~/lib/angular/angular.js"></script>
        <script src="~/lib/angular-route/angular-route.js"></script>
        <script src="~/lib/angular-animate/angular-animate.js"></script>
        <script src="~/lib/angular-bootstrap/ui-bootstrap.js"></script>
        <script src="~/lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>
        <script src="~/lib/angular-local-storage/dist/angular-local-storage.js"></script>
        <script src="~/lib/nprogress/nprogress.js"></script>
        <script src="~/lib/moment/moment.js"></script>
        <script src="~/lib/fastclick/lib/fastclick.js"></script>
        <script src="~/lib/rx.lite.js"></script>
        <script src="~/lib/lodash/dist/lodash.js"></script>
        <script src="~/lib/tinycolor/dist/tinycolor-min.js"></script>

        @*App source files*@
        <script asp-src-include="~/js/polyfills/*.js"></script>
        <script asp-src-include="~/js/models/*.js"></script>
        <script asp-src-include="~/js/common/*.js"></script>
        <script asp-src-include="~/js/directives/*.js"></script>
        <script asp-src-include="~/js/*.js"></script>
        <script asp-src-include="~/js/services/*.js"></script>
        <script asp-src-include="~/js/controllers/*.js"></script>
    </environment>

    @*In staging and production, use our CDN and bundles*@
    <environment include="Staging,Production">
        <script src="https://code.jquery.com/jquery-2.2.4.min.js" asp-fallback-src="~/lib/jquery/dist/jquery.min.js" asp-fallback-test="window.jQuery"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js" asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js" asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal" crossorigin="anonymous" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js" asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js" asp-fallback-test="window.angular"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.7/angular-route.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.7/angular-animate.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.3/ui-bootstrap-tpls.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-local-storage/0.5.0/angular-local-storage.js"></script>
        <script src="https://cdn.jsdelivr.net/nprogress/0.1.6/js/nprogress.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/4.1.0/rx.lite.js"></script>
        <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.1/tinycolor.min.js"></script>
        <script src="~/dist/app.min.js" asp-append-version="true"></script>
    </environment>

    @RenderSection("Scripts", required: false)
</body>
</html>
