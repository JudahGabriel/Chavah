
<style>
    @@media (max-width: 768px) {
        .hanukkah-container {
            display: none;
        }
    }

    .hanukkah-container {
        opacity: 0;
        position: fixed;
        bottom: 60px;
        width: 100%;
        background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(140,67,22,1) 100%);
        height: 500px;
        padding-top: 100px;
        pointer-events: none;
        user-select: none;
        z-index: -1;
        transition: opacity ease-in 2s;
    }

    .hanukkiah {
        width: 900px;
        margin: 60px auto 0;
        filter: drop-shadow(0px 0px 100px yellow);
    }

    .candle {
        width: 100px;
        float: left;
        cursor: pointer;
    }

        .candle .flame-container {
            width: 100px;
        }

            .candle .flame-container .flame-box {
                transform: scaleX(0.01) scaleY(0.01);
                transform-origin: 50% 100%;
                width: 110px;
                height: 120px;
                margin-left: -4px;
                transition: 0.4s 0.05s;
            }

                .candle .flame-container .flame-box .flame {
                    display: block;
                    background: yellow;
                    width: 100px;
                    height: 100px;
                    border-radius: 40px 50px 150px 50px;
                    transform: rotate(45deg) translate(20px, 10px);
                    background: radial-gradient(ellipse at bottom right, rgba(56, 32, 175, 0.3) 25%, #1e5799 30%, #ed5050 20%, #eab64f 40%, #ffffdf 80%, #ffffaf 90%, #dd8249 100%, #dd8249 120%);
                    box-shadow: -2px -2px 5px 0px #ffffcf, -10px -10px 40px rgba(255, 220, 220, 0.5), -10px -10px 90px rgba(255, 232, 135, 0.4);
                    filter: drop-shadow(12px 12px 7px white) drop-shadow(10px 10px 100px yellow) blur(4px);
                }

        .candle .stick {
            width: 50px;
            height: 200px;
            border-radius: 5px;
            background-color: #eee;
            margin: 0 auto;
            transform: perspective(50em) rotateX(50deg) scaleY(1.9);
            /*background: linear-gradient(to bottom, #777 45%, #555 72%, #000000 100%);*/
            transition: 0.4s;
            background-image: url("https://bitshuvafiles01.com/chavah/menorah-gold.jpg");
            background-size: cover;
            box-shadow: 0 0 5px 1px black;
        }

    input[type="checkbox"]:checked + .candle .flame-box {
        transform: scaleX(0.25) scaleY(0.9);
        animation: skwush 8.2s 0.5s infinite;
    }

        input[type="checkbox"]:checked + .candle .flame-box .flame {
            animation: jiggle 5s infinite;
        }

    input[type="checkbox"]:checked + .candle .stick {
        /*background: linear-gradient(to bottom, #fffcf2 0%, #fff9d8 20%, #fff9d8 45%, #474020 72%, #000000 100%);*/
        filter: brightness(1.7);
        transition: 0.4s;
    }

    .candle[for="candle5"] {
        margin-top: -40px;
    }

    @@keyframes skwush {
        0% {
            transform: scaleX(0.25) scaleY(0.9);
        }

        15% {
            transform: scaleX(0.25) scaleY(0.8);
        }

        30% {
            transform: scaleX(0.25) scaleY(0.9);
        }

        45% {
            transform: scaleX(0.25) scaleY(0.8);
        }

        60% {
            transform: scaleX(0.25) scaleY(1);
        }

        75% {
            transform: scaleX(0.25) scaleY(0.75);
        }

        100% {
            transform: scaleX(0.25) scaleY(0.9);
        }
    }

    @@keyframes jiggle {
        0% {
            border-radius: 40px 50px 150px 50px;
        }

        5% {
            border-radius: 60px 50px 90px 50px;
        }

        10% {
            border-radius: 40px 50px 150px 70px;
        }

        30% {
            border-radius: 100px 50px 150px 50px;
        }

        75% {
            border-radius: 40px 50px 150px 50px;
        }

        80% {
            border-radius: 80px 50px 90px 50px;
        }

        100% {
            border-radius: 40px 50px 150px 50px;
        }
    }

    input[type="checkbox"] {
        display: none;
    }
</style>

<div class="hanukkah-container">
    <div class="hanukkiah">

        <input type="checkbox" id="candle1">
        <div for="candle1" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle2">
        <div for="candle2" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle3">
        <div for="candle3" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle4">
        <div for="candle4" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle5">
        <div for="candle5" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle6">
        <div for="candle6" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle7">
        <div for="candle7" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle8">
        <div for="candle8" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

        <input type="checkbox" id="candle9">
        <div for="candle9" class="candle">
            <div class="flame-container">
                <div class="flame-box"><div class="flame"></div></div>
            </div>
            <div class="stick"></div>
        </div>

    </div>
</div>


<script type="text/javascript">

    $(function () {
        var firstDayOfHanukkah = new Date(2017, 11, 12); // December 12th, 2017 (Hanukkah begins the evening of this day)
        var lastDayOfHanukkah = new Date(2017, 11, 20); // December 20th, 2017 (Hanukkah ends the evening of this day)

        var timeBetweenLighting = 1600;
        var today = new Date();
        var isCurrentlyHanukkah = today >= firstDayOfHanukkah && today <= lastDayOfHanukkah;

        function dayToCandleIndex(dayOfHanukkah) {
            var candleCount = 9;
            var shamashOffset = dayOfHanukkah <= 4 ? 1 : 0;
            return candleCount - dayOfHanukkah + shamashOffset;
        }

        function lightMenorah(candleIndicesToLight) {
            var nextCandleToLight = candleIndicesToLight[0];
            setTimeout(function () {
                //console.log("lighting candle ", nextCandleToLight);
                var candleSelector = ".hanukkah-container #candle" + nextCandleToLight;
                $(candleSelector).prop("checked", "checked");

                // Shave off the one we just lit.
                var newIndicesToLight = candleIndicesToLight.slice(1);
                if (newIndicesToLight.length > 0) {
                    lightMenorah(newIndicesToLight);
                }
            }, timeBetweenLighting);
        }

        if (isCurrentlyHanukkah) {
            // How many days into Hanukkah are we?
            var firstDayOfHanukkah = firstDayOfHanukkah.getDate();
            var nthDayOfHanukkah = today.getDate() - firstDayOfHanukkah + 1;
            if (today.getHours() < 16) {
                // If it's earlier than 4pm, move it back a day.
                nthDayOfHanukkah--;
            }
            var shamash = 5; // 5th candle
            var candlesToLight = [shamash];

            // Traditionally, we light the shamash, then the nth-day candle (from right to left), then nth-1, and nth-2, and so on.
            for (var i = nthDayOfHanukkah; i > 0; i--) {
                var candleIndex = dayToCandleIndex(i);
                candlesToLight.push(candleIndex);
            }

            lightMenorah(candlesToLight);
        }

        if (isCurrentlyHanukkah) {
            $(".hanukkah-container").css("opacity", 1);
        }
    });
</script>